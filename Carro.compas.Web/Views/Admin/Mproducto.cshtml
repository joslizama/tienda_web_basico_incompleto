@model Carro.compas.Web.Models.producto

@{

    var r = Convert.ToString(Session["rut"]);
    var t = Convert.ToInt32(Session["tipo"]);
    var n = Convert.ToString(Session["nombre"]);

    if (r == null || r == "" || t == null || t != 1)
    {
        Response.Redirect("~/Home/Log");
    }


}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Productos</title>
    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="~/Scripts/jquery-3.6.0.js"></script>
    <script src="~/Scripts/jquery-3.6.0.min.js"></script>
    <script src="~/JS/ModificarProducto.js"></script>

</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark static-top">
        <div class="container">
            <a class="navbar-brand" href="#">Productos</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="~/Admin/Lproductos">Volver al listado</a>
                    </li>

                    <li class="nav-item active">
                        <a class="nav-link" href="~/Admin/Index_admin">Volver al inicio</a>
                    </li>

                    <li class="nav-item active">
                        <a class="nav-link" href="~/Admin/Csesion">Cerrar sesion</a>
                    </li>


                </ul>
            </div>
        </div>
    </nav>
    <!-- Page Content -->

    <br />

    <form action="Mproductoc" method="post" enctype="multipart/form-data">
        <table align="center" class="border border-dark" border="1">
            <tr>
                <td colspan="2" align="center"><h3>Modificar producto</h3></td>
            </tr>
            <!---->
            <tr>
                <td><label>Nombre : </label></td>
                <td> <input type="text" class="form-control" name="nombre" id="nombre" value="@Model.nombre" required></td>
            </tr>
            <tr>
                <td><label>Imagen : </label></td>
                <td><input type="file" class="form-control-file" id="imagen" name="imagen"></td>
            </tr>
            <tr>
                <td><label>Descripcion : </label></td>
                <td><input type="text" class="form-control" name="descripcion" id="descripcion" value="@Model.descripcion" required></td>
            </tr>
            <tr>
                <td><label>Precio : </label></td>
                <td> <input type="text" class="form-control" name="precio" id="precio" value="@Model.precio" required></td>
            </tr>
            <tr>
                <td><label>Stock : </label></td>
                <td> <input type="text" class="form-control" name="stock" id="stock" value="@Model.stock" required></td>
            </tr>
            <tr>
                <td><label>Categoria : </label></td>
                <td>


                    <select class="form-control" id="categorias" name="categorias" required>

                        @foreach (var i in TempData["cat"] as List<Carro.compas.Web.Models.categoria>)
                        {

                            if (Model.categoria_id == i.id)
                            {
                                <option value="@i.id">@i.nombre</option>
                            }


                        }
                        <option value="null">Seleccione</option>

                        @foreach (var j in TempData["cat"] as List<Carro.compas.Web.Models.categoria>)
                        {
                            <option value="@j.id">@j.nombre</option>
                        }
                    </select>
                </td>
            </tr>

            <tr>
                <td><label>Subcategoria : </label></td>
                <td>


                    <select class="form-control" id="scategorias" name="scategorias" required>

                        @foreach (var k in TempData["scatcat"] as List<Carro.compas.Web.Models.sub_categorias>)
                        {

                            if (Model.subcategoria_id == k.id)
                            {
                                <option value="@k.id">@k.nombre</option>
                            }


                        }
                        <option value="null">Seleccione</option>

                        @foreach (var l in TempData["scatcat"] as List<Carro.compas.Web.Models.sub_categorias>)
                        {
                            <option value="@l.id">@l.nombre</option>
                        }
                    </select>
                    
                </td>
            </tr>

            <tr>
                <td><label>Marcas : </label></td>
                <td>


                    <select class="form-control" id="marcas" name="marcas" required>

                        @foreach (var m in TempData["mar"] as List<Carro.compas.Web.Models.marca>)
                        {

                            if (Model.subcategoria_id == m.id)
                            {
                                <option value="@m.id">@m.nombre</option>
                            }


                        }
                        <option value="null">Seleccione</option>

                        @foreach (var ñ in TempData["mar"] as List<Carro.compas.Web.Models.marca>)
                        {

                            if (Model.subcategoria_id == ñ.id)
                            {
                                <option value="@ñ.id">@ñ.nombre</option>
                            }


                        }


                    </select>
                </td>
            </tr>


            <tr>
                <td colspan="2" align="center">
                    <button type="submit" name="Modificar" value="Modificar" id="Modificar" class="btn btn-outline-success">Modificar</button>
                    &nbsp;
                    <button type="reset" name="Cancelar" value="Cancelar" id="Cancelar" class="btn btn-outline-danger">Cancelar</button>
                </td>
            </tr>



        </table>
    </form>







    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.slim.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
</body>
</html>
